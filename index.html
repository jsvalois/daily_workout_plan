<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Daily Workout Companion — Volume Tracker</title>
  <meta name="theme-color" content="#111111"/>
  <link rel="manifest" href="manifest.json"/>
  <link rel="stylesheet" href="style.css" />
  <script type="module" src="app.js" defer></script>
</head>
<body>
  <header class="topbar">
    <div class="brand">Daily Workout Companion</div>
    <div class="clock" id="clock">--:--:--</div>
  </header>

  <main class="container">
    <section class="card">
      <h2>Choose exercises</h2>
      <p class="muted">Pick up to 4 exercises and set one as <strong>Active</strong> for logging.</p>
      <div class="row">
        <div class="col"><label for="e1">E1</label><select id="e1"></select><button class="btn" data-active="e1">Set Active</button></div>
        <div class="col"><label for="e2">E2</label><select id="e2"></select><button class="btn" data-active="e2">Set Active</button></div>
        <div class="col"><label for="e3">E3</label><select id="e3"></select><button class="btn" data-active="e3">Set Active</button></div>
        <div class="col"><label for="e4">E4</label><select id="e4"></select><button class="btn" data-active="e4">Set Active</button></div>
      </div>
      <div class="row">
        <div class="col">
          <label for="currentExercise">Current (Active)</label>
          <select id="currentExercise"></select>
        </div>
        <div class="col">
          <label for="displayUnit">Display unit</label>
          <select id="displayUnit"><option value="lb">lb</option><option value="kg">kg</option></select>
        </div>
        <div class="col">
          <label for="rangeSelect">Range</label>
          <select id="rangeSelect">
            <option value="today">Today</option>
            <option value="7d">Last 7 days</option>
            <option value="30d">Last 30 days</option>
            <option value="all">All time</option>
          </select>
        </div>
      </div>
    </section>

    <section class="card">
      <h2>Active exercise</h2>
      <div class="viewer">
        <div class="viewerLabel" id="viewerLabel">—</div>
        <img id="viewerImg" src="assets/exercises/placeholder.svg" alt="Exercise" />
      </div>
    </section>

    <section class="card">
      <h2>Log a set</h2>
      <div class="row">
        <div class="col">
          <label for="reps">Reps</label>
          <input id="reps" type="number" inputmode="numeric" min="1" step="1" placeholder="e.g., 10" />
        </div>
        <div class="col">
          <label for="weight">Weight</label>
          <input id="weight" type="number" inputmode="decimal" min="0" step="0.5" placeholder="e.g., 25" />
        </div>
        <div class="col">
          <label for="unit">Unit</label>
          <select id="unit"><option value="lb">lb</option><option value="kg">kg</option></select>
        </div>
        <div class="col">
          <label for="notes">Notes</label>
          <input id="notes" type="text" placeholder="tempo, RIR, etc." />
        </div>
        <div class="col">
          <label for="nSets">Sets</label>
          <input id="nSets" type="number" inputmode="numeric" min="1" step="1" value="1" />
        </div>
        <div class="col">
          <button class="btn primary" id="logBtn">Log set(s)</button>
        </div>
      </div>
      <p class="muted">Volume = <code>reps × weight</code>. Batch logging repeats the same set N times.</p>
    </section>

    <section class="card">
      <h2>Totals & progress</h2>
      <div class="row">
        <div class="col stat"><div class="statNum" id="totalVolume">0</div><div class="statLbl">Total volume</div></div>
        <div class="col stat"><div class="statNum" id="totalSets">0</div><div class="statLbl">Total sets</div></div>
        <div class="col stat"><div class="statNum" id="avgReps">0</div><div class="statLbl">Avg reps/set</div></div>
        <div class="col stat"><div class="statNum" id="avgWeight">0</div><div class="statLbl">Avg weight</div></div>
      </div>
      <div class="row">
        <div class="col">
          <h3>By category</h3>
          <table id="byGroup"><thead><tr><th>Category</th><th>Volume</th></tr></thead><tbody></tbody></table>
        </div>
        <div class="col">
          <h3>By exercise</h3>
          <table id="byExercise"><thead><tr><th>Exercise</th><th>Volume</th></tr></thead><tbody></tbody></table>
        </div>
      </div>
    </section>

    <section class="card">
      <h2>Logged sets</h2>
      <div class="controls">
        <input id="filterText" type="text" placeholder="Filter by code or name…" />
        <button class="btn" id="exportCSV">Export CSV</button>
        <button class="btn" id="exportJSON">Export JSON</button>
        <label class="btn">Import JSON <input type="file" id="importJSON" accept="application/json" style="display:none;"></label>
        <button class="btn danger" id="clearLogs">Clear All</button>
      </div>
      <div class="tablewrap">
        <table id="logTable">
          <thead>
            <tr>
              <th>Time</th><th>Exercise</th><th>Name</th><th>Category</th>
              <th>Reps</th><th>Weight</th><th>Unit</th><th>Volume</th><th>Notes</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section class="card">
      <details>
        <summary><strong>Image setup & rights</strong></summary>
        <ul>
          <li>Put images at <code>assets/exercises/</code> named <code>CODE.jpg</code> (e.g., <code>C1.jpg</code>) or edit <code>image_map.json</code> with full URLs.</li>
          <li>Recommended: 1600–2200 px width, JPG 75–85% quality.</li>
          <li>Totals convert mixed units to your selected <em>Display unit</em> for consistent tracking.</li>
          <li>Ensure you have rights to publish images if your repo is public.</li>
        </ul>
      </details>
    </section>
  </main>

  <footer class="footer">
    <span>© 2025 Daily Workout Companion</span>
  </footer>
</body>
</html>
